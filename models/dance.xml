<mujoco>
  <compiler angle="degree"/>
  <option timestep="0.01" gravity="0 0 -9.81" integrator="RK4"/>

  <worldbody>
    <!-- Ground Plane -->
    <geom name="floor" type="plane" size="10 10 0.1" rgba="0.8 0.8 0.8 1"/>

    <!-- Lead Dancer -->
    <body name="lead" pos="-1 0 0.05" euler="0 0 0.0">
      <!-- Ellipsoid for Lead Dancer with Transparency -->
      <geom name="lead_geom" type="ellipsoid" size="0.15 0.25 0.05" rgba="0 0 1 0.5" density="850"/>
      
      <!-- Slider joint allowing translation along X-axis -->
      <joint name="lead_slide_x" type="slide" axis="1 0 0" pos="0 0 0.05" damping="0.1"/>
      
      <!-- Slider joint allowing translation along Y-axis -->
      <joint name="lead_slide_y" type="slide" axis="0 1 0" pos="0 0 0.05" damping="0.1"/>
      
      <!-- Hinge joint allowing rotation around Z-axis -->
      <joint name="lead_hinge_z" type="hinge" axis="0 0 1" pos="0 0 0.05" damping="0.1"/>
      
      <!-- Sites for Lead Dancer's Shoulders (for tendon attachment) -->
      <site name="lead_cg" pos="0 0 0.0"/>
      <site name="lead_left_shoulder" pos="0 -0.25 0.0"/>
      <site name="lead_right_shoulder" pos="0 0.25 0.0"/>

      <!-- Visualize Lead Dancer's Joint (CG) -->
      <site name="lead_joint_visual" pos="0 0 0" size="0.05" rgba="1 0 0 1"/>
    </body>

    <!-- Follow Dancer -->
    <body name="follow" pos="1 0 0.05" euler="0 0 180.0">
      <!-- Ellipsoid for Follow Dancer with Transparency -->
      <geom name="follow_geom" type="ellipsoid" size="0.12 0.20 0.05" rgba="0.5 0 0.5 0.5" density="650"/>
      
      <!-- Slider joint allowing translation along X-axis -->
      <joint name="follow_slide_x" type="slide" axis="1 0 0" pos="0 0 0.05" damping="0.1"/>
      
      <!-- Slider joint allowing translation along Y-axis -->
      <joint name="follow_slide_y" type="slide" axis="0 1 0" pos="0 0 0.05" damping="0.1"/>
      
      <!-- Hinge joint allowing rotation around Z-axis -->
      <joint name="follow_hinge_z" type="hinge" axis="0 0 1" pos="0 0 0.05" damping="0.1"/>
      
      <!-- Sites for Follow Dancer's Shoulders (for tendon attachment) -->
      <site name="follow_cg" pos="0 0 0.0"/>
      <site name="follow_left_shoulder" pos="0 -0.2 0.0"/>
      <site name="follow_right_shoulder" pos="0 0.2 0.0"/>

      <!-- Visualize Follow Dancer's Joint (CG) -->
      <site name="follow_joint_visual" pos="0 0 0" size="0.05" rgba="1 0 0 1"/>
    </body>

    <!-- Salsa Coordinate Grid -->
    <!-- Reorient Axial Positions to Align with Lead's X-axis -->
    <site name="slot1" pos="-1.0 0 0.001" size="0.02" rgba="1 0 0 1"/>
    <site name="slot2" pos="-0.5 0 0.001" size="0.02" rgba="1 0 0 1"/>
    <site name="slot3" pos="0.0 0 0.001" size="0.02" rgba="1 0 0 1"/>
    <site name="slot4" pos="0.5 0 0.001" size="0.02" rgba="1 0 0 1"/>
    <site name="slot5" pos="1.0 0 0.001" size="0.02" rgba="1 0 0 1"/>

    <!-- Left Rail -->
    <site name="left1" pos="-1.0 -0.5 0.001" size="0.02" rgba="0 0 1 1"/>
    <site name="left2" pos="-0.5 -0.5 0.001" size="0.02" rgba="0 0 1 1"/>
    <site name="left3" pos="0.0 -0.5 0.001" size="0.02" rgba="0 0 1 1"/>
    <site name="left4" pos="0.5 -0.5 0.001" size="0.02" rgba="0 0 1 1"/>
    <site name="left5" pos="1.0 -0.5 0.001" size="0.02" rgba="0 0 1 1"/>

    <!-- Right Rail -->
    <site name="right1" pos="-1.0 0.5 0.001" size="0.02" rgba="0 1 0 1"/>
    <site name="right2" pos="-0.5 0.5 0.001" size="0.02" rgba="0 1 0 1"/>
    <site name="right3" pos="0.0 0.5 0.001" size="0.02" rgba="0 1 0 1"/>
    <site name="right4" pos="0.5 0.5 0.001" size="0.02" rgba="0 1 0 1"/>
    <site name="right5" pos="1.0 0.5 0.001" size="0.02" rgba="0 1 0 1"/>
  </worldbody>

  <actuator>
    <!-- General Force Actuators for Lead -->
    <general name="lead_forward_force" body="lead" ctrllimited="true" ctrlrange="-20 20" forcelimited="true" forcerange="-20 20" gear="1 0 0 0 0 0"/>
    <general name="lead_lateral_force" body="lead" ctrllimited="true" ctrlrange="-20 20" forcelimited="true" forcerange="-20 20" gear="0 1 0 0 0 0"/>
    <general name="lead_moment" body="lead" ctrllimited="true" ctrlrange="-10 10" forcelimited="true" forcerange="-10 10" gear="0 0 1 0 0 0"/>

    <!-- General Force Actuators for Follow -->
    <general name="follow_forward_force" body="follow" ctrllimited="true" ctrlrange="-20 20" forcelimited="true" forcerange="-20 20" gear="1 0 0 0 0 0"/>
    <general name="follow_lateral_force" body="follow" ctrllimited="true" ctrlrange="-20 20" forcelimited="true" forcerange="-20 20" gear="0 1 0 0 0 0"/>
    <general name="follow_moment" body="follow" ctrllimited="true" ctrlrange="-10 10" forcelimited="true" forcerange="-10 10" gear="0 0 1 0 0 0"/>
  </actuator>

  <!-- Tendon Elements: Representing Elastic String/ Rubber Band Between Lead and Follow -->
  <tendon>
    <!-- Tendon connecting the Lead and Follow -->
    <spatial name="dancer_arms_1" springlength=".75" stiffness="100" damping="5">
      <site site="lead_left_shoulder"/>
      <site site="follow_right_shoulder"/>
    </spatial>
  </tendon>

  <tendon>
    <!-- Tendon connecting the Lead and Follow -->
    <spatial name="dancer_arms_2" springlength=".75" stiffness="100" damping="5">
      <site site="lead_right_shoulder"/>
      <site site="follow_left_shoulder"/>
    </spatial>
  </tendon>

</mujoco>

<key qpos='-1.25553e-10 0.424585 0.0499978 1 -6.30484e-05 5.8393e-12 -1.00223e-06 8.18356e-09 1.17528 0.0499978 1 0.000227857 2.27094e-10 1.89271e-06'/>
